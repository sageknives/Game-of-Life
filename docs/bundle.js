(()=>{"use strict";function e(e,t){for(var i=0;i<t.length;i++){var l=t[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function t(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var i=function(){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t(this,"timeStamp",0),t(this,"frameTimer",0),t(this,"frameInterval",0),t(this,"shouldRender",!0),this.frameInterval=1e3/e}var l,n;return l=i,(n=[{key:"setFrameRate",value:function(e){this.frameInterval=1e3/e}},{key:"update",value:function(e){var t=e-this.timeStamp;t>17&&console.error(t),this.timeStamp=e,this.frameTimer<this.frameInterval?(this.shouldRender=!1,this.frameTimer+=t):(this.shouldRender=!0,this.frameTimer=this.frameInterval-this.frameTimer)}}])&&e(l.prototype,n),i}();function l(e,t){for(var i=0;i<t.length;i++){var l=t[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var a=function(){function e(t,i,l){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"black";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"initialPercentage",void 0),n(this,"width",void 0),n(this,"height",void 0),n(this,"cellSize",void 0),n(this,"cells",[]),n(this,"fillStyle",void 0),this.fillStyle=r,this.cellSize=l,this.width=t,this.height=i,this.initialPercentage=a,this.repopulate()}var t,i;return t=e,(i=[{key:"repopulate",value:function(e){for(var t=[],i=0;i<this.width/this.cellSize;i++){for(var l=[],n=0;n<this.height/this.cellSize;n++){var a=Math.random()<(e||this.initialPercentage)/100;l.push(a?1:0)}t.push(l)}this.cells=t}},{key:"setCellSize",value:function(e){this.cellSize=e,this.repopulate()}},{key:"setStartPercentage",value:function(e){this.initialPercentage=e,this.repopulate()}},{key:"setFillStyle",value:function(e){this.fillStyle=e}},{key:"setSize",value:function(e,t){this.width=e,this.height=t,this.repopulate()}},{key:"getNeighborCount",value:function(e,t){var i,l,n,a,r,s,h,o;return(null===(i=this.cells[e-1])||void 0===i?void 0:i[t-1])+(null===(l=this.cells[e])||void 0===l?void 0:l[t-1])+(null===(n=this.cells[e+1])||void 0===n?void 0:n[t-1])+(null===(a=this.cells[e-1])||void 0===a?void 0:a[t])+(null===(r=this.cells[e+1])||void 0===r?void 0:r[t])+(null===(s=this.cells[e-1])||void 0===s?void 0:s[t+1])+(null===(h=this.cells[e])||void 0===h?void 0:h[t+1])+(null===(o=this.cells[e+1])||void 0===o?void 0:o[t+1])}},{key:"update",value:function(){for(var e=[],t=0;t<this.cells.length;t++){for(var i=[],l=0;l<this.cells[t].length;l++){var n=this.getNeighborCount(t,l),a=2===n&&this.cells[t][l]||3===n;i.push(a?1:0)}e.push(i)}this.cells=e}},{key:"draw",value:function(e){e.fillStyle=this.fillStyle;for(var t=0;t<this.cells.length;t++)for(var i=0;i<this.cells[t].length;i++)this.cells[t][i]&&e.fillRect(t*this.cellSize,i*this.cellSize,this.cellSize,this.cellSize)}}])&&l(t.prototype,i),e}();window.addEventListener("load",(function(){var e=document.getElementById("canvas1"),t=document.getElementById("wrapper"),l=document.getElementById("cell-size"),n=document.getElementById("start-percentage"),r=document.getElementById("fill-style"),s=document.getElementById("frame-rate"),h=e.getContext("2d");e.width=t.clientWidth,e.height=t.clientHeight;var o=new a(Math.floor(e.width),Math.floor(e.height),parseInt(l.value),parseInt(n.value),r.value),u=new i(parseInt(s.value));window.addEventListener("resize",(function(){var t=document.getElementById("wrapper");e.width=t.clientWidth,e.height=t.clientHeight,o.setSize(t.clientWidth,t.clientHeight)})),l.addEventListener("change",(function(){o.setCellSize(parseInt(this.value))})),n.addEventListener("change",(function(e){o.setStartPercentage(parseInt(this.value))})),r.addEventListener("change",(function(){o.setFillStyle(this.value)})),s.addEventListener("change",(function(){u.setFrameRate(parseInt(this.value))})),function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;u.update(i),u.shouldRender&&(h.clearRect(0,0,e.width,e.height),o.update(),o.draw(h)),requestAnimationFrame(t)}()}))})();